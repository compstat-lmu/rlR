language: r
dist: bionic
sudo: required
cache:
  directories:
    - $TRAVIS_BUILD_DIR/packrat/src
    - $TRAVIS_BUILD_DIR/packrat/lib
  packages: true
addons:
  apt:
    update: true
    packages:
      - python3
      - python3-pip 
      - python3-all-dev
      - python3-setuptools
      - python3-wheel
      - python3-venv
      - build-essential
      - zlib1g-dev
      - cmake
      - r-base-core
      - r-base-dev
      - liblapack-dev
install:
  - sudo R --no-save <<< 'install.packages("packrat", repos = "http://cran.rstudio.com/")'
  - R -e "0" --args --bootstrap-packrat
  - R -e "packrat::restore(restart = FALSE)"
  - sudo python3 -m pip install enum34
  - sudo python3 -m pip install gym
  - sudo python3 -m pip install atari-py
  - sudo python3 -m pip install gym[atari]
  - sudo python3 -m pip install tensorflow==1.1.0
  - sudo python3 -m pip install numpy==1.12.1
  - sudo python3 -m pip install h5py==2.7.0
  - sudo R --no-save <<< 'install.packages(c("Matrix", "checkmate", "data.table", "logging", "ggplot2", "abind", "foreach"), repos = "http://cran.rstudio.com/")'
  - sudo R --no-save <<< 'install.packages("tensorflow", repos = "http://cran.rstudio.com/")'
  - sudo R --no-save <<< 'install.packages("keras", repos = "http://cran.rstudio.com/")'
  - sudo R --no-save <<< 'tensorflow::install_tensorflow()'
  - sudo R --no-save <<< 'keras::install_keras()'

env:
  matrix:
  - _R_CHECK_LENGTH_1_CONDITION_=true
